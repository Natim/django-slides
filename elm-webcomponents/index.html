<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>How to integrate Javascript libs with Elm?</title>

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/black.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

        <script src="good-map/good-map.js" async defer></script>
  
        <style>
          good-map {
            display: block;
            height: 400px;
          }

          .left {
           left:-8.33%;
           text-align: center;
           float: left;
           width:50%;
           z-index:-10;
          }

          .right {
           left:31.25%;
           top: 75px;
           float: right;
           text-align: center;
           z-index:-10;
           width:50%;
          }
        </style>

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
                <section data-markdown>
	                <script type="text/template">
                        # Elm + JS = üíï

                        Rennes JS ‚Äî 25 septembre 2019
                        
                        @Natim
	                </script>
                </section>

                <section data-markdown>
	                <script type="text/template">
# Comment int√©grer du JS ?

	                </script>
                </section>

                <section data-markdown>
	                <script type="text/template">
## Comment int√©grer du JS ?

1. R√©√©crire la lib en Elm
2. Initialiser son appli avec les Flags
3. Utiliser un canal de communication appel√© Ports
4. Charger des WebComponents depuis Elm
5. Livrer son appli Elm comme un webcomponent
	                </script>
                </section>

                <section data-markdown>
	                <script type="text/template">
# R√©√©crire le composant en Elm

	                </script>
                </section>

                <section data-markdown>
	                <script type="text/template">
                        ## √âcrire un composant Elm

                        - C'est parfois possible
                        - √áa permet de b√©n√©ficier des avantages de Elm
                        - Aucune int√©gration de JS n'est n√©cessaire

	                </script>
                </section>
                <section data-markdown>
	                <script type="text/template">
## Catalogue

https://package.elm-lang.org/
	                </script>
                </section>
                <section data-markdown>
	                <script type="text/template">
# Initialiser son composant avec des Flags

Exemple d'un viewer JSON
	                </script>
                </section>
                <section data-markdown>
	                <script type="text/template">
## Initialiser son composant avec des Flags

<div class="left">
C√¥t√© JavaScript

![Flags JS](flags.png)
</div>

<div class="right">
C√¥t√© Elm

![Flags Elm](flags-elm.png)
</div>

	                </script>
                </section>
                
                <section data-markdown>
	                <script type="text/template">
## Les avantages des flags

- Composant initialis√© avec des donn√©es fra√Æches
- Un composant autonome par la suite
- Garantie que les donn√©es en entr√©e sont valides
- Pas de d√©codeur √† √©crire
- Pas de d√©lais au chargement du composant
	                </script>
                </section>
                <section data-markdown>
	                <script type="text/template">
## Les inconv√©nients des flags

- Une fois le composant charg√© on ne peut plus modifier les flags
- Si le type des donn√©es en entr√©es sont incorrectes, le composant ne d√©marre pas
	                </script>
                </section>

                <section data-markdown>
	                <script type="text/template">
# Utiliser les ports

Exemple d'un store persistant dans LocalStorage.
	                </script>
                </section>
                <section data-markdown>
	                <script type="text/template">
## Canal de communication bi&#8209;directionnel

![Client/Server](client-server.png)
	                </script>
                </section>
                <section data-markdown>
	                <script type="text/template">
## D√©finir un port

Cr√©ation de l'app en JavaScript

![setup](port-setup.png)
	                </script>
                </section>
                <section data-markdown>
	                <script type="text/template">
                        ## D√©finir un port

                        Elm envoie une valeur √† Javascript
                        
<div class="left">
C√¥t√© Elm

![Port Cmd Elm](port-saveStore-elm.png)

</div>

<div class="right">
C√¥t√© JavaScript

![Port Subscribe JS](port-saveStore-js.png)
</div>
                        
	                </script>
                </section>
                <section data-markdown>
	                <script type="text/template">
## D√©finir un port

JavaScript envoie une valeur √† Elm
<div class="left">
C√¥t√© JavaScript

![Port Send JS](port-send-js.png)
</div>

<div class="right">
C√¥t√© Elm

![Port Sub Elm](port-send-elm.png)

</div>
	                </script>
                </section>
                <section data-markdown>
	                <script type="text/template">
## Les avantages des ports

- Un protocole de communication d√©fini et s√©curis√©
- Permet d'appeler toutes les API JS disponibles
- Garantie que les donn√©es en entr√©e sont valides
	                </script>
                </section>
                <section data-markdown>
	                <script type="text/template">
## Les inconv√©nients des ports

- N√©cessite d'√©crire et de maintenir du JavaScript
- Maintenir un protocole d'API entre Elm et JS
- N√©cessite des d√©codeurs pour garantir le typage API
- Impossible de modifier le DOM rendu par Elm en JS
	                </script>
                </section>
                <section data-markdown>
	                <script type="text/template">
# Utiliser les web components

Int√©grer une carte Google Maps dans notre appli Elm
	                </script>
                </section>
                <section data-markdown>
	                <script type="text/template">
## Sont-ils pr√™ts ?

![WebComponents](canIuseWebComponents.png)

	                </script>
                </section>
                <section data-markdown>
	                <script type="text/template">
## Que sont les web components ?

- **Custom elements**, permettent la cr√©ation de balise personnalis√©es
- **Shadow DOM**, d√©finit les r√®gles pour avoir des styles et balisages sp√©cifiques √† un web component

	                </script>
                </section>
                <section data-markdown>
	                <script type="text/template">
## Catalogue

https://www.webcomponents.org/
	                </script>
                </section>
                <section data-markdown>
	                <script type="text/template">
## Cr√©er un web component

![WebComponents](custom-element-1.png)
	                </script>
                </section>

                
                <section data-markdown>
	                <script type="text/template">
## Cr√©er un web component

![WebComponents](custom-element-2.png)
![WebComponents](custom-element-3.png)
	                </script>
                </section>

                <section data-markdown>
	                <script type="text/template">
## Utiliser son web component

![good-map](good-map.png)
	                </script>
                </section>

                <section data-markdown>
	                <script type="text/template">
## Utiliser notre web component en JS

<good-map
    api-key="AIzaSyCwFpb-7egXk83gMwyuofJZrkIP4XlgD28"
    longitude="-1.694661"
    latitude="48.106661"
    zoom="17"></good-map>

	                </script>
                </section>

                <section data-markdown>
	                <script type="text/template">
## Utiliser notre web component en Elm

![WebComponents](webcomponent-from-elm.png)


<a href="http://localhost:1234">Tester</a>
	                </script>
                </section>
                
                <section data-markdown>
	                <script type="text/template">
# Un web component en Elm
	                </script>
                </section>

                <section data-markdown>
	                <script type="text/template">
                        ## Faire un webcomponent
![WebComponents](elm-component-register.png)

```html
<my-elm-component name="Jack"></my-elm-component>
```                        
<a href="http://localhost:1234">Tester</a>
	                </script>
                </section>

                <section data-markdown>
	                <script type="text/template">
                        # Conclusion
	                </script>
                </section>
                
                
                <section data-markdown>
	                <script type="text/template">
                        ## 1. Utiliser une lib en Elm

                        - üóΩ √Ä privil√©gier dans la mesure du possible
                        - üóû Soit regarder ce qui existe
                        - üõ∏ Soit la r√©√©crire soit m√™me
	                </script>
                </section>

                <section data-markdown>
	                <script type="text/template">
                        ## 2. Utiliser les flags

                        - ‚èØ Permet de supprimer une √©tape de loading
                        - üíæ Composants r√©utilisables et configurables
	                </script>
                </section>

                <section data-markdown>
	                <script type="text/template">
                        ## 3. Utiliser les ports

                        - üê¢ Id√©al pour manipuler des API JS depuis Elm
                        - üõë √Ä √©viter pour manipuler l'affichage
	                </script>
                </section>

			    <section data-markdown>
	                <script type="text/template">
                        ## 4. Utiliser un webcomponent JS en Elm

                        - üç± Id√©al pour d√©l√©guer une partie d'appli Elm √† JS
                        - üë®‚Äç‚úàÔ∏è Id√©al pour les widgets autonomes
                        - üòΩ S'adapte tr√®s bien √† Elm
                        - üß§ Pilot√© par la modification des attributs DOM
	                </script>
                </section>

			    <section data-markdown>
	                <script type="text/template">
                        ## 5. Utiliser un webcomponent Elm en JS

                        - üñ• Id√©al pour int√©grer un module d'affichage Elm dans une app JS
                        - üèÖ API standardis√©e par rapport aux Flags ou Ports
                        - üì¨ Permet d'exposer les ports comme events DOM
                        - üêé  Int√©gration facile avec
                          *@thread/elm&#8209;web&#8209;components*
	                </script>
                </section>
			    <section data-markdown>
	                <script type="text/template">
                        # ‚ùî Questions ‚ùì
	                </script>
                </section>
			    <section data-markdown>
	                <script type="text/template">
                        # Merci  üôè
                        
                        Rennes JS ‚Äî 25 septembre 2019
                        
                        @ Natim
	                </script>
                </section>
            </div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>
			// More info https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				history: true,

				// More info https://github.com/hakimel/reveal.js#dependencies
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
				]
			});
		</script>
	</body>
</html>
